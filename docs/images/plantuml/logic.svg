<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="869px" preserveAspectRatio="none" style="width:1429px;height:869px;" version="1.1" viewBox="0 0 1429 869" width="1429px" zoomAndPan="magnify"><defs><filter height="300%" id="fizm622ioplj1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[521817ab83e81da341a3f4b5e91bae41]
class Command--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="75.6719" id="Command" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="218.5" y="49.5"/><ellipse cx="269.25" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M271.4375,67.2656 L267.2969,67.2656 L266.875,68.2969 L267.2969,68.2969 Q267.9063,68.2969 268.1719,68.5313 Q268.4375,68.7656 268.4375,69.1563 Q268.4375,69.5313 268.1719,69.7656 Q267.9063,70 267.2969,70 L265,70 Q264.3906,70 264.1406,69.7656 Q263.875,69.5313 263.875,69.1406 Q263.875,68.7656 264.1563,68.5313 Q264.4219,68.2813 265.0469,68.2969 L267.7188,61.6406 L266.6094,61.6406 Q266,61.6406 265.7344,61.4063 Q265.4688,61.1719 265.4688,60.7813 Q265.4688,60.4063 265.7344,60.1719 Q266,59.9375 266.6094,59.9375 L270.2813,59.9375 L273.6719,68.2969 Q274.2656,68.2969 274.4531,68.4375 Q274.8438,68.7031 274.8438,69.1563 Q274.8438,69.5313 274.5781,69.7656 Q274.3281,70 273.7188,70 L271.4219,70 Q270.8125,70 270.5469,69.7656 Q270.2813,69.5313 270.2813,69.1406 Q270.2813,68.7656 270.5469,68.5313 Q270.8125,68.2969 271.4219,68.2969 L271.8438,68.2969 L271.4375,67.2656 Z M270.7188,65.5625 L269.3594,62.1875 L267.9844,65.5625 L270.7188,65.5625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="289.75" y="70.4102">Command</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="219.5" x2="386.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="219.5" x2="386.5" y1="89.5" y2="89.5"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="157" x="224.5" y="104.9189">+execute(DukeCore core) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="224.5" y="118.7549">+getHelp() : String</text><!--MD5=[351ec9e89f98c22ada9d1953381b4ac0]
class ArgCommand--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="241.7031" id="ArgCommand" style="stroke: #A80036; stroke-width: 1.5;" width="323" x="169.5" y="228"/><ellipse cx="287.75" cy="244" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M289.9375,245.7656 L285.7969,245.7656 L285.375,246.7969 L285.7969,246.7969 Q286.4063,246.7969 286.6719,247.0313 Q286.9375,247.2656 286.9375,247.6563 Q286.9375,248.0313 286.6719,248.2656 Q286.4063,248.5 285.7969,248.5 L283.5,248.5 Q282.8906,248.5 282.6406,248.2656 Q282.375,248.0313 282.375,247.6406 Q282.375,247.2656 282.6563,247.0313 Q282.9219,246.7813 283.5469,246.7969 L286.2188,240.1406 L285.1094,240.1406 Q284.5,240.1406 284.2344,239.9063 Q283.9688,239.6719 283.9688,239.2813 Q283.9688,238.9063 284.2344,238.6719 Q284.5,238.4375 285.1094,238.4375 L288.7813,238.4375 L292.1719,246.7969 Q292.7656,246.7969 292.9531,246.9375 Q293.3438,247.2031 293.3438,247.6563 Q293.3438,248.0313 293.0781,248.2656 Q292.8281,248.5 292.2188,248.5 L289.9219,248.5 Q289.3125,248.5 289.0469,248.2656 Q288.7813,248.0313 288.7813,247.6406 Q288.7813,247.2656 289.0469,247.0313 Q289.3125,246.7969 289.9219,246.7969 L290.3438,246.7969 L289.9375,245.7656 Z M289.2188,244.0625 L287.8594,240.6875 L286.4844,244.0625 L289.2188,244.0625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="308.25" y="248.9102">ArgCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="170.5" x2="491.5" y1="260" y2="260"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="175.5" y="275.4189">-arg : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="175.5" y="289.2549">-switchVals : HashMap&lt;String, String&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="170.5" x2="491.5" y1="295.6719" y2="295.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="175.5" y="311.0908">+execute(DukeCore core) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="175.5" y="324.9268">+getHelp() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="311" x="175.5" y="338.7627">~setSwitchValsMap(HashMap&lt;String, String&gt; switchVals) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="262" x="175.5" y="352.5986">~setSwitchVal(String switchName, String value) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="175.5" y="366.4346">~getSwitchVal(String switchName) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="175.5" y="380.2705">~setArg(String arg) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="175.5" y="394.1064">~getArg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="175.5" y="407.9424">~getSpec() : ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="135" x="175.5" y="421.7783">+getEmptyArgMsg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="147" x="175.5" y="435.6143">+getCmdArgLevel() : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="191" x="175.5" y="449.4502">+getSwitchMap() : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="204" x="175.5" y="463.2861">+getSwitchAliases() : Map&lt;String, String&gt;</text><path d="M6,58 L6,117.0547 L184,117.0547 L184,68 L174,58 L6,58 " fill="#FBFB77" filter="url(#fizm622ioplj1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M174,58 L174,68 L184,68 L174,58 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="12" y="76.4951">ArgCommand accesses its</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="12" y="92.8467">corresponding ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="12" y="109.1982">singleton via getSpec()</text><!--MD5=[92229cf7b2d8a1816cafdeb481f23a45]
class ArgSpec--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="222.2188" id="ArgSpec" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="18" y="592.5"/><ellipse cx="89.75" cy="612.5938" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M91.9375,614.3594 L87.7969,614.3594 L87.375,615.3906 L87.7969,615.3906 Q88.4063,615.3906 88.6719,615.625 Q88.9375,615.8594 88.9375,616.25 Q88.9375,616.625 88.6719,616.8594 Q88.4063,617.0938 87.7969,617.0938 L85.5,617.0938 Q84.8906,617.0938 84.6406,616.8594 Q84.375,616.625 84.375,616.2344 Q84.375,615.8594 84.6563,615.625 Q84.9219,615.375 85.5469,615.3906 L88.2188,608.7344 L87.1094,608.7344 Q86.5,608.7344 86.2344,608.5 Q85.9688,608.2656 85.9688,607.875 Q85.9688,607.5 86.2344,607.2656 Q86.5,607.0313 87.1094,607.0313 L90.7813,607.0313 L94.1719,615.3906 Q94.7656,615.3906 94.9531,615.5313 Q95.3438,615.7969 95.3438,616.25 Q95.3438,616.625 95.0781,616.8594 Q94.8281,617.0938 94.2188,617.0938 L91.9219,617.0938 Q91.3125,617.0938 91.0469,616.8594 Q90.7813,616.625 90.7813,616.2344 Q90.7813,615.8594 91.0469,615.625 Q91.3125,615.3906 91.9219,615.3906 L92.3438,615.3906 L91.9375,614.3594 Z M91.2188,612.6563 L89.8594,609.2813 L88.4844,612.6563 L91.2188,612.6563 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="108.25" y="609.957">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="117.75" y="625.0508">ArgSpec</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="19" x2="231" y1="632.6875" y2="632.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="24" y="648.1064">#emptyArgMsg : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="24" y="661.9424">#cmdArgLevel : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="24" y="675.7783">#switchMap : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="24" y="689.6143">#switchAliases : Map&lt;String, String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="80" x="24" y="703.4502">-spec : ArgSpec</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="19" x2="231" y1="709.8672" y2="709.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="24" y="725.2861">-ArgSpec()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="106" x="24" y="739.1221">+getSpec() : ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="24" y="752.958">+getCmdArgLevel() : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="24" y="766.7939">+getSwitchMap() : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="24" y="780.6299">+getSwitchAliases() : Map&lt;String, String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="24" y="794.4658">+getEmptyArgMsg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="24" y="808.3018">#initSwitches(Switch[] switches) : void</text><!--MD5=[dcb38af11fbc5504883bdba00db6db38]
class ArgLevel--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="97.6953" id="ArgLevel" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="422" y="38.5"/><ellipse cx="437" cy="58.5938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M439.7656,54.4688 Q439.9219,54.25 440.1094,54.1406 Q440.2969,54.0313 440.5156,54.0313 Q440.8906,54.0313 441.125,54.2969 Q441.3594,54.5469 441.3594,55.1563 L441.3594,56.6094 Q441.3594,57.2188 441.125,57.4844 Q440.8906,57.75 440.5156,57.75 Q440.1719,57.75 439.9688,57.5469 Q439.7656,57.3594 439.6563,56.8438 Q439.6094,56.4844 439.4219,56.2969 Q439.0938,55.9219 438.4844,55.7031 Q437.875,55.4844 437.25,55.4844 Q436.4844,55.4844 435.8438,55.8125 Q435.2188,56.1406 434.7188,56.8906 Q434.2344,57.6406 434.2344,58.6719 L434.2344,59.7656 Q434.2344,61 435.125,61.8281 Q436.0156,62.6406 437.6094,62.6406 Q438.5469,62.6406 439.2031,62.3906 Q439.5938,62.2344 440.0156,61.7969 Q440.2813,61.5313 440.4219,61.4531 Q440.5781,61.375 440.7813,61.375 Q441.1094,61.375 441.3594,61.6406 Q441.625,61.8906 441.625,62.2344 Q441.625,62.5781 441.2813,62.9844 Q440.7813,63.5625 439.9844,63.8906 Q438.9063,64.3438 437.6094,64.3438 Q436.0938,64.3438 434.8906,63.7188 Q433.9063,63.2188 433.2188,62.1563 Q432.5313,61.0781 432.5313,59.7969 L432.5313,58.6406 Q432.5313,57.3125 433.1406,56.1719 Q433.7656,55.0156 434.8594,54.4063 Q435.9531,53.7813 437.1875,53.7813 Q437.9219,53.7813 438.5625,53.9531 Q439.2188,54.1094 439.7656,54.4688 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="449" y="55.957">«enumeration»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="467.5" y="71.0508">ArgLevel</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="533" y1="78.6875" y2="78.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="428" y="94.1064">NONE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="428" y="107.9424">OPTIONAL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="428" y="121.7783">REQUIRED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="533" y1="128.1953" y2="128.1953"/><!--MD5=[7e68ee526bacd5d3b5b4ed7f8a923c39]
class Switch--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="158.6875" id="Switch" style="stroke: #A80036; stroke-width: 1.5;" width="267" x="569.5" y="8"/><ellipse cx="680.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M683.5156,19.875 Q683.6719,19.6563 683.8594,19.5469 Q684.0469,19.4375 684.2656,19.4375 Q684.6406,19.4375 684.875,19.7031 Q685.1094,19.9531 685.1094,20.5625 L685.1094,22.0156 Q685.1094,22.625 684.875,22.8906 Q684.6406,23.1563 684.2656,23.1563 Q683.9219,23.1563 683.7188,22.9531 Q683.5156,22.7656 683.4063,22.25 Q683.3594,21.8906 683.1719,21.7031 Q682.8438,21.3281 682.2344,21.1094 Q681.625,20.8906 681,20.8906 Q680.2344,20.8906 679.5938,21.2188 Q678.9688,21.5469 678.4688,22.2969 Q677.9844,23.0469 677.9844,24.0781 L677.9844,25.1719 Q677.9844,26.4063 678.875,27.2344 Q679.7656,28.0469 681.3594,28.0469 Q682.2969,28.0469 682.9531,27.7969 Q683.3438,27.6406 683.7656,27.2031 Q684.0313,26.9375 684.1719,26.8594 Q684.3281,26.7813 684.5313,26.7813 Q684.8594,26.7813 685.1094,27.0469 Q685.375,27.2969 685.375,27.6406 Q685.375,27.9844 685.0313,28.3906 Q684.5313,28.9688 683.7344,29.2969 Q682.6563,29.75 681.3594,29.75 Q679.8438,29.75 678.6406,29.125 Q677.6563,28.625 676.9688,27.5625 Q676.2813,26.4844 676.2813,25.2031 L676.2813,24.0469 Q676.2813,22.7188 676.8906,21.5781 Q677.5156,20.4219 678.6094,19.8125 Q679.7031,19.1875 680.9375,19.1875 Q681.6719,19.1875 682.3125,19.3594 Q682.9688,19.5156 683.5156,19.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="701.25" y="28.9102">Switch</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="835.5" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="575.5" y="55.4189">+String name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="575.5" y="69.2549">+Class type</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="575.5" y="83.0908">+boolean isOptional</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="575.5" y="96.9268">+ArgLevel argLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="575.5" y="110.7627">+String root,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="575.5" y="124.5986">+List&lt;String&gt; aliases</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="835.5" y1="131.0156" y2="131.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="575.5" y="146.4346">+Switch(String name, Class type, boolean isOptional,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="226" x="575.5" y="160.2705">ArgLevel argLevel, String root, String[] aliases)</text><path d="M267.5,666 L267.5,699.5 L232.2617,703.5 L267.5,707.5 L267.5,741.4063 A0,0 0 0 0 267.5,741.4063 L468.5,741.4063 A0,0 0 0 0 468.5,741.4063 L468.5,676 L458.5,666 L267.5,666 A0,0 0 0 0 267.5,666 " fill="#FBFB77" filter="url(#fizm622ioplj1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M458.5,666 L458.5,676 L468.5,676 L458.5,666 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="273.5" y="684.4951">This is a simplification;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="273.5" y="700.8467">all static fields and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="273.5" y="717.1982">singleton behaviour have to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="273.5" y="733.5498">be implemented in subclasses.</text><!--MD5=[628cc5a2753cca06eb1ffef55c386535]
class Parser--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="131.0156" id="Parser" style="stroke: #A80036; stroke-width: 1.5;" width="266" x="601" y="283.5"/><ellipse cx="711.25" cy="299.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M714.0156,295.375 Q714.1719,295.1563 714.3594,295.0469 Q714.5469,294.9375 714.7656,294.9375 Q715.1406,294.9375 715.375,295.2031 Q715.6094,295.4531 715.6094,296.0625 L715.6094,297.5156 Q715.6094,298.125 715.375,298.3906 Q715.1406,298.6563 714.7656,298.6563 Q714.4219,298.6563 714.2188,298.4531 Q714.0156,298.2656 713.9063,297.75 Q713.8594,297.3906 713.6719,297.2031 Q713.3438,296.8281 712.7344,296.6094 Q712.125,296.3906 711.5,296.3906 Q710.7344,296.3906 710.0938,296.7188 Q709.4688,297.0469 708.9688,297.7969 Q708.4844,298.5469 708.4844,299.5781 L708.4844,300.6719 Q708.4844,301.9063 709.375,302.7344 Q710.2656,303.5469 711.8594,303.5469 Q712.7969,303.5469 713.4531,303.2969 Q713.8438,303.1406 714.2656,302.7031 Q714.5313,302.4375 714.6719,302.3594 Q714.8281,302.2813 715.0313,302.2813 Q715.3594,302.2813 715.6094,302.5469 Q715.875,302.7969 715.875,303.1406 Q715.875,303.4844 715.5313,303.8906 Q715.0313,304.4688 714.2344,304.7969 Q713.1563,305.25 711.8594,305.25 Q710.3438,305.25 709.1406,304.625 Q708.1563,304.125 707.4688,303.0625 Q706.7813,301.9844 706.7813,300.7031 L706.7813,299.5469 Q706.7813,298.2188 707.3906,297.0781 Q708.0156,295.9219 709.1094,295.3125 Q710.2031,294.6875 711.4375,294.6875 Q712.1719,294.6875 712.8125,294.8594 Q713.4688,295.0156 714.0156,295.375 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="731.75" y="304.4102">Parser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="602" x2="866" y1="315.5" y2="315.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="607" y="330.9189">-commands : Commands</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="607" y="344.7549">-uiContext : UiContext</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="111" x="607" y="358.5908">-argParser : ArgParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="602" x2="866" y1="365.0078" y2="365.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="607" y="380.4268">+Parser(UIContext uiContext, Commands commands)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="607" y="394.2627">+Parser(UiContext uiContext)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="607" y="408.0986">+parse(String inputStr) : Command</text><!--MD5=[f4d7e041c26c7ec8fac3aafff2d7b662]
class ArgParser--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="310.8828" id="ArgParser" style="stroke: #A80036; stroke-width: 1.5;" width="316" x="854" y="548"/><ellipse cx="980.25" cy="564" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M983.0156,559.875 Q983.1719,559.6563 983.3594,559.5469 Q983.5469,559.4375 983.7656,559.4375 Q984.1406,559.4375 984.375,559.7031 Q984.6094,559.9531 984.6094,560.5625 L984.6094,562.0156 Q984.6094,562.625 984.375,562.8906 Q984.1406,563.1563 983.7656,563.1563 Q983.4219,563.1563 983.2188,562.9531 Q983.0156,562.7656 982.9063,562.25 Q982.8594,561.8906 982.6719,561.7031 Q982.3438,561.3281 981.7344,561.1094 Q981.125,560.8906 980.5,560.8906 Q979.7344,560.8906 979.0938,561.2188 Q978.4688,561.5469 977.9688,562.2969 Q977.4844,563.0469 977.4844,564.0781 L977.4844,565.1719 Q977.4844,566.4063 978.375,567.2344 Q979.2656,568.0469 980.8594,568.0469 Q981.7969,568.0469 982.4531,567.7969 Q982.8438,567.6406 983.2656,567.2031 Q983.5313,566.9375 983.6719,566.8594 Q983.8281,566.7813 984.0313,566.7813 Q984.3594,566.7813 984.6094,567.0469 Q984.875,567.2969 984.875,567.6406 Q984.875,567.9844 984.5313,568.3906 Q984.0313,568.9688 983.2344,569.2969 Q982.1563,569.75 980.8594,569.75 Q979.3438,569.75 978.1406,569.125 Q977.1563,568.625 976.4688,567.5625 Q975.7813,566.4844 975.7813,565.2031 L975.7813,564.0469 Q975.7813,562.7188 976.3906,561.5781 Q977.0156,560.4219 978.1094,559.8125 Q979.2031,559.1875 980.4375,559.1875 Q981.1719,559.1875 981.8125,559.3594 Q982.4688,559.5156 983.0156,559.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="55" x="1000.75" y="568.9102">ArgParser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="855" x2="1169" y1="580" y2="580"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="860" y="595.4189">-currCommand : ArgCommand</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="860" y="609.2549">-elementBuilder : StringBuilder</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="860" y="623.0908">-state : ParseState</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="860" y="636.9268">-currSwitchName : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="860" y="650.7627">-isEscaped : boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="860" y="664.5986">-switchMap : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="860" y="678.4346">-switchVals : HashMap&lt;String, String&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="855" x2="1169" y1="684.8516" y2="684.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="304" x="860" y="700.2705">-parseArgument(ArgCommand command, String inputStr) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="860" y="714.1064">-handleEmpty() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="860" y="727.9424">-handleArg() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="860" y="741.7783">-handleCmdArg() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="860" y="755.6143">-handleSwitch() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="860" y="769.4502">-writeElement() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="860" y="783.2861">-addSwitch() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="860" y="797.1221">-checkArgAllowed() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="860" y="810.958">-checkSwitchAllowed() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="860" y="824.7939">-checkEmptyString() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="860" y="838.6299">-checkCommandValid() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="860" y="852.4658">-setCmdArg() : void</text><!--MD5=[7b6ceb7cc0f65a4912ca02ee4fcc2a98]
class ParseState--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="111.5313" id="ParseState" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="902" y="293"/><ellipse cx="917" cy="313.0938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M919.7656,308.9688 Q919.9219,308.75 920.1094,308.6406 Q920.2969,308.5313 920.5156,308.5313 Q920.8906,308.5313 921.125,308.7969 Q921.3594,309.0469 921.3594,309.6563 L921.3594,311.1094 Q921.3594,311.7188 921.125,311.9844 Q920.8906,312.25 920.5156,312.25 Q920.1719,312.25 919.9688,312.0469 Q919.7656,311.8594 919.6563,311.3438 Q919.6094,310.9844 919.4219,310.7969 Q919.0938,310.4219 918.4844,310.2031 Q917.875,309.9844 917.25,309.9844 Q916.4844,309.9844 915.8438,310.3125 Q915.2188,310.6406 914.7188,311.3906 Q914.2344,312.1406 914.2344,313.1719 L914.2344,314.2656 Q914.2344,315.5 915.125,316.3281 Q916.0156,317.1406 917.6094,317.1406 Q918.5469,317.1406 919.2031,316.8906 Q919.5938,316.7344 920.0156,316.2969 Q920.2813,316.0313 920.4219,315.9531 Q920.5781,315.875 920.7813,315.875 Q921.1094,315.875 921.3594,316.1406 Q921.625,316.3906 921.625,316.7344 Q921.625,317.0781 921.2813,317.4844 Q920.7813,318.0625 919.9844,318.3906 Q918.9063,318.8438 917.6094,318.8438 Q916.0938,318.8438 914.8906,318.2188 Q913.9063,317.7188 913.2188,316.6563 Q912.5313,315.5781 912.5313,314.2969 L912.5313,313.1406 Q912.5313,311.8125 913.1406,310.6719 Q913.7656,309.5156 914.8594,308.9063 Q915.9531,308.2813 917.1875,308.2813 Q917.9219,308.2813 918.5625,308.4531 Q919.2188,308.6094 919.7656,308.9688 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="929" y="310.457">«enumeration»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="940.5" y="325.5508">ParseState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="903" x2="1013" y1="333.1875" y2="333.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="908" y="348.6064">EMPTY</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="908" y="362.4424">ARG</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="908" y="376.2783">CMDARG</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="908" y="390.1143">SWITCH</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="903" x2="1013" y1="396.5313" y2="396.5313"/><!--MD5=[093ed4082292ecbe1c7f4622f4555adf]
class Commands--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="61.8359" id="Commands" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="503.5" y="672.5"/><ellipse cx="583.75" cy="688.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M586.5156,684.375 Q586.6719,684.1563 586.8594,684.0469 Q587.0469,683.9375 587.2656,683.9375 Q587.6406,683.9375 587.875,684.2031 Q588.1094,684.4531 588.1094,685.0625 L588.1094,686.5156 Q588.1094,687.125 587.875,687.3906 Q587.6406,687.6563 587.2656,687.6563 Q586.9219,687.6563 586.7188,687.4531 Q586.5156,687.2656 586.4063,686.75 Q586.3594,686.3906 586.1719,686.2031 Q585.8438,685.8281 585.2344,685.6094 Q584.625,685.3906 584,685.3906 Q583.2344,685.3906 582.5938,685.7188 Q581.9688,686.0469 581.4688,686.7969 Q580.9844,687.5469 580.9844,688.5781 L580.9844,689.6719 Q580.9844,690.9063 581.875,691.7344 Q582.7656,692.5469 584.3594,692.5469 Q585.2969,692.5469 585.9531,692.2969 Q586.3438,692.1406 586.7656,691.7031 Q587.0313,691.4375 587.1719,691.3594 Q587.3281,691.2813 587.5313,691.2813 Q587.8594,691.2813 588.1094,691.5469 Q588.375,691.7969 588.375,692.1406 Q588.375,692.4844 588.0313,692.8906 Q587.5313,693.4688 586.7344,693.7969 Q585.6563,694.25 584.3594,694.25 Q582.8438,694.25 581.6406,693.625 Q580.6563,693.125 579.9688,692.0625 Q579.2813,690.9844 579.2813,689.7031 L579.2813,688.5469 Q579.2813,687.2188 579.8906,686.0781 Q580.5156,684.9219 581.6094,684.3125 Q582.7031,683.6875 583.9375,683.6875 Q584.6719,683.6875 585.3125,683.8594 Q585.9688,684.0156 586.5156,684.375 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="604.25" y="693.4102">Commands</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="504.5" x2="737.5" y1="704.5" y2="704.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="504.5" x2="737.5" y1="712.5" y2="712.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="509.5" y="727.9189">+getCommand(String cmdStr, Context context)</text><!--MD5=[137ab45a9096fcf44d2666d9caf3b49f]
class CommandUtils--><rect fill="#FEFECE" filter="url(#fizm622ioplj1)" height="103.3438" id="CommandUtils" style="stroke: #A80036; stroke-width: 1.5;" width="298" x="1120" y="297.5"/><ellipse cx="1222.75" cy="313.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1225.5156,309.375 Q1225.6719,309.1563 1225.8594,309.0469 Q1226.0469,308.9375 1226.2656,308.9375 Q1226.6406,308.9375 1226.875,309.2031 Q1227.1094,309.4531 1227.1094,310.0625 L1227.1094,311.5156 Q1227.1094,312.125 1226.875,312.3906 Q1226.6406,312.6563 1226.2656,312.6563 Q1225.9219,312.6563 1225.7188,312.4531 Q1225.5156,312.2656 1225.4063,311.75 Q1225.3594,311.3906 1225.1719,311.2031 Q1224.8438,310.8281 1224.2344,310.6094 Q1223.625,310.3906 1223,310.3906 Q1222.2344,310.3906 1221.5938,310.7188 Q1220.9688,311.0469 1220.4688,311.7969 Q1219.9844,312.5469 1219.9844,313.5781 L1219.9844,314.6719 Q1219.9844,315.9063 1220.875,316.7344 Q1221.7656,317.5469 1223.3594,317.5469 Q1224.2969,317.5469 1224.9531,317.2969 Q1225.3438,317.1406 1225.7656,316.7031 Q1226.0313,316.4375 1226.1719,316.3594 Q1226.3281,316.2813 1226.5313,316.2813 Q1226.8594,316.2813 1227.1094,316.5469 Q1227.375,316.7969 1227.375,317.1406 Q1227.375,317.4844 1227.0313,317.8906 Q1226.5313,318.4688 1225.7344,318.7969 Q1224.6563,319.25 1223.3594,319.25 Q1221.8438,319.25 1220.6406,318.625 Q1219.6563,318.125 1218.9688,317.0625 Q1218.2813,315.9844 1218.2813,314.7031 L1218.2813,313.5469 Q1218.2813,312.2188 1218.8906,311.0781 Q1219.5156,309.9219 1220.6094,309.3125 Q1221.7031,308.6875 1222.9375,308.6875 Q1223.6719,308.6875 1224.3125,308.8594 Q1224.9688,309.0156 1225.5156,309.375 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="1243.25" y="318.4102">CommandUtils</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1121" x2="1417" y1="329.5" y2="329.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1121" x2="1417" y1="337.5" y2="337.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="280" x="1126" y="352.9189">+findSwitch(String word, ArgCommand command) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="286" x="1126" y="366.7549">+disambiguate(String word, ArrayList&lt;String&gt; suggestions,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="122" x="1126" y="380.5908">Set&lt;String&gt; valid) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="207" x="1126" y="394.4268">-stringDistance(String str1, String str2) : int</text><!--MD5=[b1a0f9891b120c5cf3e40e46b33785a2]
link specCommandNote to ArgCommand--><path d="M121.8424,117.2428 C146.4879,144.5513 184.6983,186.8903 221.7516,227.9472 " fill="none" id="specCommandNote-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[c7db8779ae1be7a669659b11de19ea70]
link specCommandNote to ArgSpec--><path d="M96.447,117.211 C100.5669,201.8067 112.5177,447.1965 119.5846,592.3038 " fill="none" id="specCommandNote-ArgSpec" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[cc1b2274c613312a32a3c01a17d48041]
reverse link Command to ArgCommand--><path d="M309.2116,145.5118 C311.8188,169.8609 314.9545,199.1463 318.0242,227.8151 " fill="none" id="Command&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="302.2406,146.156,307.0714,125.5243,316.1611,144.6654,302.2406,146.156" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9eefa155e23d7c3cd6e5f4da81311456]
reverse link ArgLevel to ArgCommand--><path d="M447.7518,141.3089 C433.6238,166.4413 416.1864,197.4609 399.1361,227.7919 " fill="none" id="ArgLevel&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="450.3504,136.6861,442.4532,142.5712,447.9002,141.0446,449.4268,146.4916,450.3504,136.6861" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[abda6193cbe1b7151cd461f3f41eeb3f]
reverse link Switch to ArgCommand--><path d="M569.1259,169.9744 C555.4575,178.9223 541.8746,188.036 529,197 C514.863,206.8429 500.3424,217.2938 485.8983,227.9266 " fill="none" id="Switch&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="573.3699,167.2032,563.6472,168.7746,569.1834,169.9369,568.0211,175.473,573.3699,167.2032" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[548d82b3be8e0501a2b5f333cd67a59f]
reverse link Switch to ArgSpec--><path d="M622.6398,171.3364 C608.3713,189.1079 594.6808,208.4372 584,228 C530.1033,326.7169 585.1154,386.2888 510,470 C429.427,559.7934 353.0497,485.2655 250,548 C230.9168,559.6174 213.5148,575.252 198.1581,592.1419 " fill="none" id="Switch&lt;-ArgSpec" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="625.886,167.3315,617.1114,171.8043,622.7375,171.2157,623.3261,176.8419,625.886,167.3315" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="598.6719" y="188.1277">0..*</text><!--MD5=[f10c6aba6181244561dbdd435b20e0ad]
reverse link ArgCommand to ArgSpec--><path d="M254.1486,481.2515 C232.9163,517.7897 210.0965,557.0597 189.6338,592.2734 " fill="none" id="ArgCommand&lt;-ArgSpec" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="260.6826,470.0073,254.2095,473.1853,254.6534,480.3827,261.1265,477.2047,260.6826,470.0073" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="304.5,511,307.5,505,310.5,511,304.5,511" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="242" y="527.4951">specifies parameters of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="186.7412" y="581.7624">1</text><!--MD5=[ec922a47c2a6b7f6b3e978053ad8a1b0]
reverse link Parser to Commands--><path d="M660.2536,425.1355 C643.038,447.5301 627.089,473.2491 618,500 C598.2215,558.2124 606.7153,631.3042 614.186,672.1561 " fill="none" id="Parser&lt;-Commands" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="668.506,414.7548,661.6411,416.9623,661.0384,424.1482,667.9033,421.9407,668.506,414.7548" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="702.5,511,705.5,505,708.5,511,702.5,511" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="619" y="527.4951">maps names to commands for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="605.0587" y="661.5897">1</text><!--MD5=[1fa4bd877ebd84fe00185dd77dd12fd6]
reverse link Parser to ArgParser--><path d="M780.9998,425.8799 C799.9279,455.3768 822.5663,488.918 845,518 C852.6093,527.8644 860.6158,537.8527 868.8342,547.8127 " fill="none" id="Parser&lt;-ArgParser" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="773.9353,414.7906,773.7855,422.0001,780.3828,424.9113,780.5326,417.7018,773.9353,414.7906" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="902.5,511,905.5,505,908.5,511,902.5,511" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="846" y="527.4951">parses arguments for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="854.7301" y="537.3906">1</text><!--MD5=[806e5409f2fb76ab75e81f5099a265e6]
reverse link ParseState to ArgParser--><path d="M972.4137,410.0855 C978.4939,437.4647 985.2489,470.2301 990,500 C992.4642,515.4403 994.7312,531.5846 996.7961,547.7348 " fill="none" id="ParseState&lt;-ArgParser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="971.2869,405.0378,969.3439,414.6931,972.3763,409.9177,977.1517,412.9501,971.2869,405.0378" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b2b17b209583fec55e09845b6f6688e0]
reverse link Switch to ArgParser--><path d="M841.7325,109.8831 C911.3265,128.8846 989.6385,163.8468 1032,228 C1093.5206,321.1681 1084.524,448.4595 1062.3126,547.8941 " fill="none" id="Switch&lt;-ArgParser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="836.7374,108.5424,844.3927,114.7389,841.5664,109.8387,846.4667,107.0124,836.7374,108.5424" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[237948f4989d041eb738e7b10859002a]
reverse link ArgCommand to ArgParser--><path d="M497.2801,464.4624 C531.7455,484.6479 568.6582,503.7202 605,518 C668.683,543.023 692.2321,523.1941 756,548 C788.9552,560.8196 822.4654,577.8004 853.9106,595.8272 " fill="none" id="ArgCommand&lt;-ArgParser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="492.6529,461.7372,498.3777,469.7514,496.9611,464.2747,502.4378,462.8582,492.6529,461.7372" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[cf48bb04d60a1a4bc156e9b42102ea5f]
reverse link CommandUtils to ArgParser--><path d="M1228.6126,404.7095 C1200.6113,443.3338 1161.8429,496.8101 1124.8342,547.859 " fill="none" id="CommandUtils&lt;-ArgParser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1231.63,400.5473,1223.1089,405.486,1228.6952,404.5954,1229.5858,410.1817,1231.63,400.5473" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[54035d63532a0453a3768c72c0acff13]
@startuml
skinparam classAttributeIconSize 0 

abstract class Command {
  {abstract} +execute(DukeCore core) : void
  +getHelp() : String
}

abstract class ArgCommand {
  -arg : String
  -switchVals : HashMap<String, String>
  +execute(DukeCore core) : void
  +getHelp() : String 
  ~setSwitchValsMap(HashMap<String, String> switchVals) : void
  ~setSwitchVal(String switchName, String value) : void
  ~getSwitchVal(String switchName) : String
  ~setArg(String arg) : void
  ~getArg() : String
  {abstract} ~getSpec() : ArgSpec
  {abstract} +getEmptyArgMsg() : String
  {abstract} +getCmdArgLevel() : ArgLevel
  {abstract} +getSwitchMap() : Map<String, Switch>
  {abstract} +getSwitchAliases() : Map<String, String>
}

note "ArgCommand accesses its\ncorresponding ArgSpec\nsingleton via getSpec()" as specCommandNote
specCommandNote .. ArgCommand
specCommandNote .. ArgSpec

class ArgLevel <<enumeration>> {
  NONE
  OPTIONAL
  REQUIRED
}

class Switch {
  +String name
  +Class type 
  +boolean isOptional
  +ArgLevel argLevel
  +String root, 
  +List<String> aliases
  +Switch(String name, Class type, boolean isOptional,\nArgLevel argLevel, String root, String[] aliases)
}

abstract class ArgSpec <<Singleton>> {
    #emptyArgMsg : String
    #cmdArgLevel : ArgLevel 
    #switchMap : Map<String, Switch> 
    #switchAliases : Map<String, String> 
    -spec : ArgSpec {static}
    -ArgSpec()
    +getSpec() : ArgSpec {static}
    +getCmdArgLevel() : ArgLevel
    +getSwitchMap() : Map<String, Switch>
    +getSwitchAliases() : Map<String, String>
    +getEmptyArgMsg() : String 
    #initSwitches(Switch[] switches) : void
}

note right of ArgSpec : This is a simplification;\nall static fields and\nsingleton behaviour have to\nbe implemented in subclasses.

Command <|- - ArgCommand 
ArgLevel <.. ArgCommand
Switch <.. ArgCommand
Switch "0..*" <- - ArgSpec
ArgCommand *- - "1" ArgSpec : < specifies parameters of

class Parser {
    -commands : Commands
    -uiContext : UiContext
    -argParser : ArgParser
    +Parser(UIContext uiContext, Commands commands)   
    +Parser(UiContext uiContext)   
    +parse(String inputStr) : Command
}

class ArgParser {
    -currCommand : ArgCommand 
    -elementBuilder : StringBuilder 
    -state : ParseState 
    -currSwitchName : String 
    -isEscaped : boolean 
    -switchMap : Map<String, Switch> 
    -switchVals : HashMap<String, String>
    -parseArgument(ArgCommand command, String inputStr) : void
    -handleEmpty() : void
    -handleArg() : void
    -handleCmdArg() : void
    -handleSwitch() : void
    -writeElement() : void
    -addSwitch() : void
    -checkArgAllowed() : void
    -checkSwitchAllowed() : void
    -checkEmptyString() : void
    -checkCommandValid() : void
    -setCmdArg() : void
}

class ParseState <<enumeration>> {
    EMPTY
    ARG
    CMDARG
    SWITCH
}

class Commands {
    +getCommand(String cmdStr, Context context)
}

class CommandUtils {
    {static} +findSwitch(String word, ArgCommand command) : String
    {static} +disambiguate(String word, ArrayList<String> suggestions,\nSet<String> valid) : String
    {static} -stringDistance(String str1, String str2) : int
}

Parser o- - "1" Commands : < maps names to commands for
Parser *- - "1" ArgParser : < parses arguments for
ParseState <.. ArgParser
Switch <.. ArgParser
ArgCommand <.. ArgParser
CommandUtils <.. ArgParser

@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 SGT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: SG
--></g></svg>