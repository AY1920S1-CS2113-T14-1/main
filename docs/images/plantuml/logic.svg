<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1023px" preserveAspectRatio="none" style="width:1212px;height:1023px;" version="1.1" viewBox="0 0 1212 1023" width="1212px" zoomAndPan="magnify"><defs><filter height="300%" id="fab6un6rjcnmf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[521817ab83e81da341a3f4b5e91bae41]
class Command--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="75.6719" id="Command" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="218.5" y="49.5"/><ellipse cx="269.25" cy="65.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M271.4375,67.2656 L267.2969,67.2656 L266.875,68.2969 L267.2969,68.2969 Q267.9063,68.2969 268.1719,68.5313 Q268.4375,68.7656 268.4375,69.1563 Q268.4375,69.5313 268.1719,69.7656 Q267.9063,70 267.2969,70 L265,70 Q264.3906,70 264.1406,69.7656 Q263.875,69.5313 263.875,69.1406 Q263.875,68.7656 264.1563,68.5313 Q264.4219,68.2813 265.0469,68.2969 L267.7188,61.6406 L266.6094,61.6406 Q266,61.6406 265.7344,61.4063 Q265.4688,61.1719 265.4688,60.7813 Q265.4688,60.4063 265.7344,60.1719 Q266,59.9375 266.6094,59.9375 L270.2813,59.9375 L273.6719,68.2969 Q274.2656,68.2969 274.4531,68.4375 Q274.8438,68.7031 274.8438,69.1563 Q274.8438,69.5313 274.5781,69.7656 Q274.3281,70 273.7188,70 L271.4219,70 Q270.8125,70 270.5469,69.7656 Q270.2813,69.5313 270.2813,69.1406 Q270.2813,68.7656 270.5469,68.5313 Q270.8125,68.2969 271.4219,68.2969 L271.8438,68.2969 L271.4375,67.2656 Z M270.7188,65.5625 L269.3594,62.1875 L267.9844,65.5625 L270.7188,65.5625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="59" x="289.75" y="70.4102">Command</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="219.5" x2="386.5" y1="81.5" y2="81.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="219.5" x2="386.5" y1="89.5" y2="89.5"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="157" x="224.5" y="104.9189">+execute(DukeCore core) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="224.5" y="118.7549">+getHelp() : String</text><!--MD5=[351ec9e89f98c22ada9d1953381b4ac0]
class ArgCommand--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="241.7031" id="ArgCommand" style="stroke: #A80036; stroke-width: 1.5;" width="323" x="215.5" y="228"/><ellipse cx="333.75" cy="244" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M335.9375,245.7656 L331.7969,245.7656 L331.375,246.7969 L331.7969,246.7969 Q332.4063,246.7969 332.6719,247.0313 Q332.9375,247.2656 332.9375,247.6563 Q332.9375,248.0313 332.6719,248.2656 Q332.4063,248.5 331.7969,248.5 L329.5,248.5 Q328.8906,248.5 328.6406,248.2656 Q328.375,248.0313 328.375,247.6406 Q328.375,247.2656 328.6563,247.0313 Q328.9219,246.7813 329.5469,246.7969 L332.2188,240.1406 L331.1094,240.1406 Q330.5,240.1406 330.2344,239.9063 Q329.9688,239.6719 329.9688,239.2813 Q329.9688,238.9063 330.2344,238.6719 Q330.5,238.4375 331.1094,238.4375 L334.7813,238.4375 L338.1719,246.7969 Q338.7656,246.7969 338.9531,246.9375 Q339.3438,247.2031 339.3438,247.6563 Q339.3438,248.0313 339.0781,248.2656 Q338.8281,248.5 338.2188,248.5 L335.9219,248.5 Q335.3125,248.5 335.0469,248.2656 Q334.7813,248.0313 334.7813,247.6406 Q334.7813,247.2656 335.0469,247.0313 Q335.3125,246.7969 335.9219,246.7969 L336.3438,246.7969 L335.9375,245.7656 Z M335.2188,244.0625 L333.8594,240.6875 L332.4844,244.0625 L335.2188,244.0625 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="78" x="354.25" y="248.9102">ArgCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="216.5" x2="537.5" y1="260" y2="260"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="221.5" y="275.4189">-arg : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="221.5" y="289.2549">-switchVals : HashMap&lt;String, String&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="216.5" x2="537.5" y1="295.6719" y2="295.6719"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="221.5" y="311.0908">+execute(DukeCore core) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="221.5" y="324.9268">+getHelp() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="311" x="221.5" y="338.7627">~setSwitchValsMap(HashMap&lt;String, String&gt; switchVals) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="262" x="221.5" y="352.5986">~setSwitchVal(String switchName, String value) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="207" x="221.5" y="366.4346">~getSwitchVal(String switchName) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="221.5" y="380.2705">~setArg(String arg) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="84" x="221.5" y="394.1064">~getArg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="221.5" y="407.9424">~getSpec() : ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="135" x="221.5" y="421.7783">+getEmptyArgMsg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="147" x="221.5" y="435.6143">+getCmdArgLevel() : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="191" x="221.5" y="449.4502">+getSwitchMap() : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="204" x="221.5" y="463.2861">+getSwitchAliases() : Map&lt;String, String&gt;</text><path d="M6,58 L6,117.0547 L184,117.0547 L184,68 L174,58 L6,58 " fill="#FBFB77" filter="url(#fab6un6rjcnmf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M174,58 L174,68 L184,68 L174,58 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="12" y="76.4951">ArgCommand accesses its</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="12" y="92.8467">corresponding ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="12" y="109.1982">singleton via getSpec()</text><!--MD5=[92229cf7b2d8a1816cafdeb481f23a45]
class ArgSpec--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="222.2188" id="ArgSpec" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="202" y="599.5"/><ellipse cx="273.75" cy="619.5938" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M275.9375,621.3594 L271.7969,621.3594 L271.375,622.3906 L271.7969,622.3906 Q272.4063,622.3906 272.6719,622.625 Q272.9375,622.8594 272.9375,623.25 Q272.9375,623.625 272.6719,623.8594 Q272.4063,624.0938 271.7969,624.0938 L269.5,624.0938 Q268.8906,624.0938 268.6406,623.8594 Q268.375,623.625 268.375,623.2344 Q268.375,622.8594 268.6563,622.625 Q268.9219,622.375 269.5469,622.3906 L272.2188,615.7344 L271.1094,615.7344 Q270.5,615.7344 270.2344,615.5 Q269.9688,615.2656 269.9688,614.875 Q269.9688,614.5 270.2344,614.2656 Q270.5,614.0313 271.1094,614.0313 L274.7813,614.0313 L278.1719,622.3906 Q278.7656,622.3906 278.9531,622.5313 Q279.3438,622.7969 279.3438,623.25 Q279.3438,623.625 279.0781,623.8594 Q278.8281,624.0938 278.2188,624.0938 L275.9219,624.0938 Q275.3125,624.0938 275.0469,623.8594 Q274.7813,623.625 274.7813,623.2344 Q274.7813,622.8594 275.0469,622.625 Q275.3125,622.3906 275.9219,622.3906 L276.3438,622.3906 L275.9375,621.3594 Z M275.2188,619.6563 L273.8594,616.2813 L272.4844,619.6563 L275.2188,619.6563 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="66" x="292.25" y="616.957">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="47" x="301.75" y="632.0508">ArgSpec</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="203" x2="415" y1="639.6875" y2="639.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="208" y="655.1064">#emptyArgMsg : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="208" y="668.9424">#cmdArgLevel : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="208" y="682.7783">#switchMap : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="208" y="696.6143">#switchAliases : Map&lt;String, String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="80" x="208" y="710.4502">-spec : ArgSpec</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="203" x2="415" y1="716.8672" y2="716.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="208" y="732.2861">-ArgSpec()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="106" x="208" y="746.1221">+getSpec() : ArgSpec</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="208" y="759.958">+getCmdArgLevel() : ArgLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="208" y="773.7939">+getSwitchMap() : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="208" y="787.6299">+getSwitchAliases() : Map&lt;String, String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="208" y="801.4658">+getEmptyArgMsg() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="208" y="815.3018">#initSwitches(Switch[] switches) : void</text><!--MD5=[dcb38af11fbc5504883bdba00db6db38]
class ArgLevel--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="97.6953" id="ArgLevel" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="422" y="38.5"/><ellipse cx="437" cy="58.5938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M439.7656,54.4688 Q439.9219,54.25 440.1094,54.1406 Q440.2969,54.0313 440.5156,54.0313 Q440.8906,54.0313 441.125,54.2969 Q441.3594,54.5469 441.3594,55.1563 L441.3594,56.6094 Q441.3594,57.2188 441.125,57.4844 Q440.8906,57.75 440.5156,57.75 Q440.1719,57.75 439.9688,57.5469 Q439.7656,57.3594 439.6563,56.8438 Q439.6094,56.4844 439.4219,56.2969 Q439.0938,55.9219 438.4844,55.7031 Q437.875,55.4844 437.25,55.4844 Q436.4844,55.4844 435.8438,55.8125 Q435.2188,56.1406 434.7188,56.8906 Q434.2344,57.6406 434.2344,58.6719 L434.2344,59.7656 Q434.2344,61 435.125,61.8281 Q436.0156,62.6406 437.6094,62.6406 Q438.5469,62.6406 439.2031,62.3906 Q439.5938,62.2344 440.0156,61.7969 Q440.2813,61.5313 440.4219,61.4531 Q440.5781,61.375 440.7813,61.375 Q441.1094,61.375 441.3594,61.6406 Q441.625,61.8906 441.625,62.2344 Q441.625,62.5781 441.2813,62.9844 Q440.7813,63.5625 439.9844,63.8906 Q438.9063,64.3438 437.6094,64.3438 Q436.0938,64.3438 434.8906,63.7188 Q433.9063,63.2188 433.2188,62.1563 Q432.5313,61.0781 432.5313,59.7969 L432.5313,58.6406 Q432.5313,57.3125 433.1406,56.1719 Q433.7656,55.0156 434.8594,54.4063 Q435.9531,53.7813 437.1875,53.7813 Q437.9219,53.7813 438.5625,53.9531 Q439.2188,54.1094 439.7656,54.4688 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="449" y="55.957">«enumeration»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="467.5" y="71.0508">ArgLevel</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="533" y1="78.6875" y2="78.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="428" y="94.1064">NONE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="428" y="107.9424">OPTIONAL</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="428" y="121.7783">REQUIRED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="533" y1="128.1953" y2="128.1953"/><!--MD5=[7e68ee526bacd5d3b5b4ed7f8a923c39]
class Switch--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="158.6875" id="Switch" style="stroke: #A80036; stroke-width: 1.5;" width="267" x="569.5" y="8"/><ellipse cx="680.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M683.5156,19.875 Q683.6719,19.6563 683.8594,19.5469 Q684.0469,19.4375 684.2656,19.4375 Q684.6406,19.4375 684.875,19.7031 Q685.1094,19.9531 685.1094,20.5625 L685.1094,22.0156 Q685.1094,22.625 684.875,22.8906 Q684.6406,23.1563 684.2656,23.1563 Q683.9219,23.1563 683.7188,22.9531 Q683.5156,22.7656 683.4063,22.25 Q683.3594,21.8906 683.1719,21.7031 Q682.8438,21.3281 682.2344,21.1094 Q681.625,20.8906 681,20.8906 Q680.2344,20.8906 679.5938,21.2188 Q678.9688,21.5469 678.4688,22.2969 Q677.9844,23.0469 677.9844,24.0781 L677.9844,25.1719 Q677.9844,26.4063 678.875,27.2344 Q679.7656,28.0469 681.3594,28.0469 Q682.2969,28.0469 682.9531,27.7969 Q683.3438,27.6406 683.7656,27.2031 Q684.0313,26.9375 684.1719,26.8594 Q684.3281,26.7813 684.5313,26.7813 Q684.8594,26.7813 685.1094,27.0469 Q685.375,27.2969 685.375,27.6406 Q685.375,27.9844 685.0313,28.3906 Q684.5313,28.9688 683.7344,29.2969 Q682.6563,29.75 681.3594,29.75 Q679.8438,29.75 678.6406,29.125 Q677.6563,28.625 676.9688,27.5625 Q676.2813,26.4844 676.2813,25.2031 L676.2813,24.0469 Q676.2813,22.7188 676.8906,21.5781 Q677.5156,20.4219 678.6094,19.8125 Q679.7031,19.1875 680.9375,19.1875 Q681.6719,19.1875 682.3125,19.3594 Q682.9688,19.5156 683.5156,19.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="701.25" y="28.9102">Switch</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="835.5" y1="40" y2="40"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="575.5" y="55.4189">+String name</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="57" x="575.5" y="69.2549">+Class type</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="575.5" y="83.0908">+boolean isOptional</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="575.5" y="96.9268">+ArgLevel argLevel</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="575.5" y="110.7627">+String root,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="100" x="575.5" y="124.5986">+List&lt;String&gt; aliases</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="835.5" y1="131.0156" y2="131.0156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="575.5" y="146.4346">+Switch(String name, Class type, boolean isOptional,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="226" x="575.5" y="160.2705">ArgLevel argLevel, String root, String[] aliases)</text><path d="M451.5,673 L451.5,706.5 L416.2617,710.5 L451.5,714.5 L451.5,748.4063 A0,0 0 0 0 451.5,748.4063 L652.5,748.4063 A0,0 0 0 0 652.5,748.4063 L652.5,683 L642.5,673 L451.5,673 A0,0 0 0 0 451.5,673 " fill="#FBFB77" filter="url(#fab6un6rjcnmf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M642.5,673 L642.5,683 L652.5,683 L642.5,673 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="457.5" y="691.4951">This is a simplification;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="457.5" y="707.8467">all static fields and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="457.5" y="724.1982">singleton behaviour have to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="457.5" y="740.5498">be implemented in subclasses.</text><!--MD5=[628cc5a2753cca06eb1ffef55c386535]
class Parser--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="324.7188" id="Parser" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="688" y="548"/><ellipse cx="789.25" cy="564" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M792.0156,559.875 Q792.1719,559.6563 792.3594,559.5469 Q792.5469,559.4375 792.7656,559.4375 Q793.1406,559.4375 793.375,559.7031 Q793.6094,559.9531 793.6094,560.5625 L793.6094,562.0156 Q793.6094,562.625 793.375,562.8906 Q793.1406,563.1563 792.7656,563.1563 Q792.4219,563.1563 792.2188,562.9531 Q792.0156,562.7656 791.9063,562.25 Q791.8594,561.8906 791.6719,561.7031 Q791.3438,561.3281 790.7344,561.1094 Q790.125,560.8906 789.5,560.8906 Q788.7344,560.8906 788.0938,561.2188 Q787.4688,561.5469 786.9688,562.2969 Q786.4844,563.0469 786.4844,564.0781 L786.4844,565.1719 Q786.4844,566.4063 787.375,567.2344 Q788.2656,568.0469 789.8594,568.0469 Q790.7969,568.0469 791.4531,567.7969 Q791.8438,567.6406 792.2656,567.2031 Q792.5313,566.9375 792.6719,566.8594 Q792.8281,566.7813 793.0313,566.7813 Q793.3594,566.7813 793.6094,567.0469 Q793.875,567.2969 793.875,567.6406 Q793.875,567.9844 793.5313,568.3906 Q793.0313,568.9688 792.2344,569.2969 Q791.1563,569.75 789.8594,569.75 Q788.3438,569.75 787.1406,569.125 Q786.1563,568.625 785.4688,567.5625 Q784.7813,566.4844 784.7813,565.2031 L784.7813,564.0469 Q784.7813,562.7188 785.3906,561.5781 Q786.0156,560.4219 787.1094,559.8125 Q788.2031,559.1875 789.4375,559.1875 Q790.1719,559.1875 790.8125,559.3594 Q791.4688,559.5156 792.0156,559.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="809.75" y="568.9102">Parser</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="689" x2="935" y1="580" y2="580"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="694" y="595.4189">-commands : Commands</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="694" y="609.2549">-currCommand : ArgCommand</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="694" y="623.0908">-elementBuilder : StringBuilder</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="694" y="636.9268">-state : ParseState</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="694" y="650.7627">-currSwitchName : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="694" y="664.5986">-isEscaped : boolean</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="694" y="678.4346">-switchMap : Map&lt;String, Switch&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="694" y="692.2705">-switchVals : HashMap&lt;String, String&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="689" x2="935" y1="698.6875" y2="698.6875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="694" y="714.1064">+Parser(Context context, Commands commands)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="694" y="727.9424">+Parser(Context context)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="694" y="741.7783">+parse(String inputStr) : Command</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="694" y="755.6143">-parseArgument(String inputStr) : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="694" y="769.4502">-handleEmpty() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="694" y="783.2861">-handleArg() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="694" y="797.1221">-handleString() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="694" y="810.958">-handleSwitch() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="694" y="824.7939">-writeElement() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="694" y="838.6299">-addSwitch() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="694" y="852.4658">-checkInputAllowed() : void</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="141" x="694" y="866.3018">-checkCommandValid() : void</text><!--MD5=[7b6ceb7cc0f65a4912ca02ee4fcc2a98]
class ParseState--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="111.5313" id="ParseState" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="756" y="293"/><ellipse cx="771" cy="313.0938" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M773.7656,308.9688 Q773.9219,308.75 774.1094,308.6406 Q774.2969,308.5313 774.5156,308.5313 Q774.8906,308.5313 775.125,308.7969 Q775.3594,309.0469 775.3594,309.6563 L775.3594,311.1094 Q775.3594,311.7188 775.125,311.9844 Q774.8906,312.25 774.5156,312.25 Q774.1719,312.25 773.9688,312.0469 Q773.7656,311.8594 773.6563,311.3438 Q773.6094,310.9844 773.4219,310.7969 Q773.0938,310.4219 772.4844,310.2031 Q771.875,309.9844 771.25,309.9844 Q770.4844,309.9844 769.8438,310.3125 Q769.2188,310.6406 768.7188,311.3906 Q768.2344,312.1406 768.2344,313.1719 L768.2344,314.2656 Q768.2344,315.5 769.125,316.3281 Q770.0156,317.1406 771.6094,317.1406 Q772.5469,317.1406 773.2031,316.8906 Q773.5938,316.7344 774.0156,316.2969 Q774.2813,316.0313 774.4219,315.9531 Q774.5781,315.875 774.7813,315.875 Q775.1094,315.875 775.3594,316.1406 Q775.625,316.3906 775.625,316.7344 Q775.625,317.0781 775.2813,317.4844 Q774.7813,318.0625 773.9844,318.3906 Q772.9063,318.8438 771.6094,318.8438 Q770.0938,318.8438 768.8906,318.2188 Q767.9063,317.7188 767.2188,316.6563 Q766.5313,315.5781 766.5313,314.2969 L766.5313,313.1406 Q766.5313,311.8125 767.1406,310.6719 Q767.7656,309.5156 768.8594,308.9063 Q769.9531,308.2813 771.1875,308.2813 Q771.9219,308.2813 772.5625,308.4531 Q773.2188,308.6094 773.7656,308.9688 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="783" y="310.457">«enumeration»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="794.5" y="325.5508">ParseState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="757" x2="867" y1="333.1875" y2="333.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="34" x="762" y="348.6064">EMPTY</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="762" y="362.4424">ARG</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="762" y="376.2783">STRING</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="762" y="390.1143">SWITCH</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="757" x2="867" y1="396.5313" y2="396.5313"/><!--MD5=[093ed4082292ecbe1c7f4622f4555adf]
class Commands--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="61.8359" id="Commands" style="stroke: #A80036; stroke-width: 1.5;" width="235" x="694.5" y="951"/><ellipse cx="774.75" cy="967" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M777.5156,962.875 Q777.6719,962.6563 777.8594,962.5469 Q778.0469,962.4375 778.2656,962.4375 Q778.6406,962.4375 778.875,962.7031 Q779.1094,962.9531 779.1094,963.5625 L779.1094,965.0156 Q779.1094,965.625 778.875,965.8906 Q778.6406,966.1563 778.2656,966.1563 Q777.9219,966.1563 777.7188,965.9531 Q777.5156,965.7656 777.4063,965.25 Q777.3594,964.8906 777.1719,964.7031 Q776.8438,964.3281 776.2344,964.1094 Q775.625,963.8906 775,963.8906 Q774.2344,963.8906 773.5938,964.2188 Q772.9688,964.5469 772.4688,965.2969 Q771.9844,966.0469 771.9844,967.0781 L771.9844,968.1719 Q771.9844,969.4063 772.875,970.2344 Q773.7656,971.0469 775.3594,971.0469 Q776.2969,971.0469 776.9531,970.7969 Q777.3438,970.6406 777.7656,970.2031 Q778.0313,969.9375 778.1719,969.8594 Q778.3281,969.7813 778.5313,969.7813 Q778.8594,969.7813 779.1094,970.0469 Q779.375,970.2969 779.375,970.6406 Q779.375,970.9844 779.0313,971.3906 Q778.5313,971.9688 777.7344,972.2969 Q776.6563,972.75 775.3594,972.75 Q773.8438,972.75 772.6406,972.125 Q771.6563,971.625 770.9688,970.5625 Q770.2813,969.4844 770.2813,968.2031 L770.2813,967.0469 Q770.2813,965.7188 770.8906,964.5781 Q771.5156,963.4219 772.6094,962.8125 Q773.7031,962.1875 774.9375,962.1875 Q775.6719,962.1875 776.3125,962.3594 Q776.9688,962.5156 777.5156,962.875 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="795.25" y="971.9102">Commands</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="695.5" x2="928.5" y1="983" y2="983"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="695.5" x2="928.5" y1="991" y2="991"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="700.5" y="1006.4189">+getCommand(String cmdStr, Context context)</text><!--MD5=[4914356be9f92eb5fd96a14ab9a73ccd]
class CommandHelpers--><rect fill="#FEFECE" filter="url(#fab6un6rjcnmf)" height="103.3438" id="CommandHelpers" style="stroke: #A80036; stroke-width: 1.5;" width="298" x="903" y="297.5"/><ellipse cx="996.25" cy="313.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M999.0156,309.375 Q999.1719,309.1563 999.3594,309.0469 Q999.5469,308.9375 999.7656,308.9375 Q1000.1406,308.9375 1000.375,309.2031 Q1000.6094,309.4531 1000.6094,310.0625 L1000.6094,311.5156 Q1000.6094,312.125 1000.375,312.3906 Q1000.1406,312.6563 999.7656,312.6563 Q999.4219,312.6563 999.2188,312.4531 Q999.0156,312.2656 998.9063,311.75 Q998.8594,311.3906 998.6719,311.2031 Q998.3438,310.8281 997.7344,310.6094 Q997.125,310.3906 996.5,310.3906 Q995.7344,310.3906 995.0938,310.7188 Q994.4688,311.0469 993.9688,311.7969 Q993.4844,312.5469 993.4844,313.5781 L993.4844,314.6719 Q993.4844,315.9063 994.375,316.7344 Q995.2656,317.5469 996.8594,317.5469 Q997.7969,317.5469 998.4531,317.2969 Q998.8438,317.1406 999.2656,316.7031 Q999.5313,316.4375 999.6719,316.3594 Q999.8281,316.2813 1000.0313,316.2813 Q1000.3594,316.2813 1000.6094,316.5469 Q1000.875,316.7969 1000.875,317.1406 Q1000.875,317.4844 1000.5313,317.8906 Q1000.0313,318.4688 999.2344,318.7969 Q998.1563,319.25 996.8594,319.25 Q995.3438,319.25 994.1406,318.625 Q993.1563,318.125 992.4688,317.0625 Q991.7813,315.9844 991.7813,314.7031 L991.7813,313.5469 Q991.7813,312.2188 992.3906,311.0781 Q993.0156,309.9219 994.1094,309.3125 Q995.2031,308.6875 996.4375,308.6875 Q997.1719,308.6875 997.8125,308.8594 Q998.4688,309.0156 999.0156,309.375 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="103" x="1016.75" y="318.4102">CommandHelpers</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="904" x2="1200" y1="329.5" y2="329.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="904" x2="1200" y1="337.5" y2="337.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="280" x="909" y="352.9189">+findSwitch(String word, ArgCommand command) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="286" x="909" y="366.7549">+disambiguate(String word, ArrayList&lt;String&gt; suggestions,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="122" x="909" y="380.5908">Set&lt;String&gt; valid) : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="207" x="909" y="394.4268">-stringDistance(String str1, String str2) : int</text><!--MD5=[b1a0f9891b120c5cf3e40e46b33785a2]
link specCommandNote to ArgCommand--><path d="M127.0744,117.2428 C156.5237,144.5513 202.1819,186.8903 246.4574,227.9472 " fill="none" id="specCommandNote-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[c7db8779ae1be7a669659b11de19ea70]
link specCommandNote to ArgSpec--><path d="M101.2142,117.2978 C115.1766,182.3758 151.4823,341.6582 198,470 C213.631,513.1257 233.9335,559.1578 252.8938,599.2838 " fill="none" id="specCommandNote-ArgSpec" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><!--MD5=[cc1b2274c613312a32a3c01a17d48041]
reverse link Command to ArgCommand--><path d="M319.208,144.7754 C326.1393,169.2692 334.512,198.8567 342.7068,227.8151 " fill="none" id="Command&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="312.4706,146.6747,313.7602,125.5243,325.9416,142.8626,312.4706,146.6747" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[9eefa155e23d7c3cd6e5f4da81311456]
reverse link ArgLevel to ArgCommand--><path d="M457.0963,141.6221 C447.4108,166.6988 435.4808,197.5867 423.8146,227.7919 " fill="none" id="ArgLevel&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="459.0027,136.6861,452.0285,143.6403,457.2011,141.3503,459.4912,146.5228,459.0027,136.6861" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[abda6193cbe1b7151cd461f3f41eeb3f]
reverse link Switch to ArgCommand--><path d="M599.9084,170.1946 C577.0228,188.5522 552.307,208.3779 527.9519,227.9143 " fill="none" id="Switch&lt;-ArgCommand" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="603.8615,167.0237,594.3382,169.5349,599.9612,170.1523,599.3439,175.7753,603.8615,167.0237" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[548d82b3be8e0501a2b5f333cd67a59f]
reverse link Switch to ArgSpec--><path d="M682.2175,172.4265 C659.728,253.5697 618.4764,376.952 556,470 C538.6485,495.8421 531.0801,501.0083 505,518 C476.2975,536.7002 461.1163,527.0659 434,548 C415.1235,562.5729 397.5656,580.6485 381.929,599.3952 " fill="none" id="Switch&lt;-ArgSpec" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="683.6718,167.1436,677.4267,174.7593,682.3448,171.9643,685.1398,176.8824,683.6718,167.1436" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="661.1514" y="188.1991">0..*</text><!--MD5=[f10c6aba6181244561dbdd435b20e0ad]
reverse link ArgCommand to ArgSpec--><path d="M351.7962,482.9877 C344.5936,521.2784 336.8254,562.5755 329.9099,599.3395 " fill="none" id="ArgCommand&lt;-ArgSpec" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="354.2151,470.1283,349.1748,475.2854,351.9967,481.9215,357.0369,476.7644,354.2151,470.1283" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="411.5,511,414.5,505,417.5,511,411.5,511" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="349" y="527.4951">specifies parameters of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="324.134" y="588.4608">1</text><!--MD5=[ec922a47c2a6b7f6b3e978053ad8a1b0]
reverse link Parser to Commands--><path d="M812,886.1744 C812,910.8109 812,933.5217 812,950.6442 " fill="none" id="Parser&lt;-Commands" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="812,873.1349,808,879.1349,812,885.1349,816,879.1349,812,873.1349" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#000000" points="896.5,914,899.5,908,902.5,914,896.5,914" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="813" y="930.4951">maps names to commands for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="7" x="804.2781" y="940.0754">1</text><!--MD5=[d3638ff0f77cc7ef80b54b4623706068]
reverse link ParseState to Parser--><path d="M812,410.1273 C812,448.1267 812,498.9272 812,547.9277 " fill="none" id="ParseState&lt;-Parser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="812,405.0877,808,414.0877,812,410.0877,816,414.0877,812,405.0877" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[20cd2f1cfd9864a9043508fb8d918f5e]
reverse link Switch to Parser--><path d="M706.0999,172.3622 C710.1002,250.3408 719.0925,368.8184 739,470 C744.012,495.4742 750.6377,522.0986 757.8562,547.9625 " fill="none" id="Switch&lt;-Parser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="705.8435,167.285,702.3025,176.4753,706.0956,172.2786,710.2923,176.0718,705.8435,167.285" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d099f5547ddd1f1b64bc3dbe3ec6d054]
reverse link ArgCommand to Parser--><path d="M542.8884,450.8728 C585.9252,480.1536 631.084,513.5487 670,548 C675.891,553.2151 681.7711,558.6682 687.6023,564.2849 " fill="none" id="ArgCommand&lt;-Parser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="538.7304,448.0521,543.9328,456.4148,542.8682,450.859,548.4239,449.7944,538.7304,448.0521" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[207870ed06e7d4a01f8a15c9e4cc41b8]
reverse link CommandHelpers to Parser--><path d="M1014.5494,405.41 C989.0218,443.861 953.8234,496.8785 919.9236,547.94 " fill="none" id="CommandHelpers&lt;-Parser" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1017.6139,400.7941,1009.3035,406.0796,1014.8483,404.9596,1015.9683,410.5045,1017.6139,400.7941" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[eaae5a59818d58d2d49215571cd5e5ee]
@startuml
skinparam classAttributeIconSize 0 

abstract class Command {
  {abstract} +execute(DukeCore core) : void
  +getHelp() : String
}

abstract class ArgCommand {
  -arg : String
  -switchVals : HashMap<String, String>
  +execute(DukeCore core) : void
  +getHelp() : String 
  ~setSwitchValsMap(HashMap<String, String> switchVals) : void
  ~setSwitchVal(String switchName, String value) : void
  ~getSwitchVal(String switchName) : String
  ~setArg(String arg) : void
  ~getArg() : String
  {abstract} ~getSpec() : ArgSpec
  {abstract} +getEmptyArgMsg() : String
  {abstract} +getCmdArgLevel() : ArgLevel
  {abstract} +getSwitchMap() : Map<String, Switch>
  {abstract} +getSwitchAliases() : Map<String, String>
}

note "ArgCommand accesses its\ncorresponding ArgSpec\nsingleton via getSpec()" as specCommandNote
specCommandNote .. ArgCommand
specCommandNote .. ArgSpec

class ArgLevel <<enumeration>> {
  NONE
  OPTIONAL
  REQUIRED
}

class Switch {
  +String name
  +Class type 
  +boolean isOptional
  +ArgLevel argLevel
  +String root, 
  +List<String> aliases
  +Switch(String name, Class type, boolean isOptional,\nArgLevel argLevel, String root, String[] aliases)
}

abstract class ArgSpec <<Singleton>> {
    #emptyArgMsg : String
    #cmdArgLevel : ArgLevel 
    #switchMap : Map<String, Switch> 
    #switchAliases : Map<String, String> 
    -spec : ArgSpec {static}
    -ArgSpec()
    +getSpec() : ArgSpec {static}
    +getCmdArgLevel() : ArgLevel
    +getSwitchMap() : Map<String, Switch>
    +getSwitchAliases() : Map<String, String>
    +getEmptyArgMsg() : String 
    #initSwitches(Switch[] switches) : void
}

note right of ArgSpec : This is a simplification;\nall static fields and\nsingleton behaviour have to\nbe implemented in subclasses.

Command <|- - ArgCommand 
ArgLevel <.. ArgCommand
Switch <.. ArgCommand
Switch "0..*" <- - ArgSpec
ArgCommand *- - "1" ArgSpec : < specifies parameters of

class Parser {
    -commands : Commands
    -currCommand : ArgCommand 
    -elementBuilder : StringBuilder 
    -state : ParseState 
    -currSwitchName : String 
    -isEscaped : boolean 
    -switchMap : Map<String, Switch> 
    -switchVals : HashMap<String, String>
    +Parser(Context context, Commands commands)   
    +Parser(Context context)   
    +parse(String inputStr) : Command
    -parseArgument(String inputStr) : void
    -handleEmpty() : void
    -handleArg() : void
    -handleString() : void
    -handleSwitch() : void
    -writeElement() : void
    -addSwitch() : void
    -checkInputAllowed() : void
    -checkCommandValid() : void
}

class ParseState <<enumeration>> {
    EMPTY
    ARG
    STRING
    SWITCH
}

class Commands {
    +getCommand(String cmdStr, Context context)
}

class CommandHelpers {
    {static} +findSwitch(String word, ArgCommand command) : String
    {static} +disambiguate(String word, ArrayList<String> suggestions,\nSet<String> valid) : String
    {static} -stringDistance(String str1, String str2) : int
}

Parser o- - "1" Commands : < maps names to commands for
ParseState <.. Parser
Switch <.. Parser
ArgCommand <.. Parser
CommandHelpers <.. Parser

@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 SGT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11+28
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: SG
--></g></svg>